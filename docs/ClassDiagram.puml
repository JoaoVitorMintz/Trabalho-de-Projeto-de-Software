@startuml ClassDiagram
' =============================
' Classes de Sensores
' =============================
class Sensor {
  - int idSensor
  - String tipo
  + boolean validarSensores()
}

class SensorTemperatura {
  - double temperatura
  + boolean validarTemperatura()
}

class SensorUmidade {
  - double umidade
  + boolean validarUmidade()
}

class SensorInfravermelho {
  - boolean ativo
  + boolean validarPragas()
}

Sensor <|-- SensorTemperatura
Sensor <|-- SensorUmidade
Sensor <|-- SensorInfravermelho

' =============================
' Classes de Drones e Missões
' =============================
class Drone {
  - int idDrone
  - String status
  - List<Sensor> sensores
  + void atualizarStatus(String novoStatus)
}

class MissoesVoo {
  - Date data
  - String idMissao
  - double duracao
  - CadastroArea area
  - Drone drone
  + void atribuirDrone(Drone drone)
  + boolean verificarSobreposicao()
}

class CadastroArea {
  - double tamanho
  - String localizacao
  - String tipoCultivo
}

class RegistroDados {
  - List<byte[]> imagens
  - List<Double> valoresSensores
  + void salvarDados()
}

class Relatorio {
  - List<Double> medicoes
  - int qtdVoo
  + void gerarResumo()
}

Drone "1" --> "1..*" Sensor
MissoesVoo "1" --> "1" Drone
MissoesVoo "1" --> "1" CadastroArea
MissoesVoo "1" --> "1" RegistroDados
RegistroDados "1" --> "1" Relatorio

' =============================
' Classes de Usuários e Autenticação
' =============================
class Usuario {
  - int userID
  - String nome
  - String email
  + boolean validarEmail()
}

class Administrador {
  + void gerenciarSistema(CadastroArea area, Drone drone, Scanner sc)
}

class Operador {
  + void executarOperacoes(RegistroDados reg, Relatorio rel, Scanner sc)
}

Usuario <|-- Administrador
Usuario <|-- Operador

class Autorizacao {
  - String senhaHash
  - String token
  - String role
  + String verificarRole()
  + boolean validarSenha(String senhaDigitada)
  + boolean validarToken(String tokenRecebido)
}

Usuario "1" --> "0..1" Autorizacao

' =============================
' Serviços e Aplicação
' =============================
interface UsuarioService {
  + void cadastrar(Usuario usuario, String senha)
  + boolean autenticar(String nomeOuEmail, String senha)
  + Usuario buscar(String nomeOuEmail)
}

class UsuarioServiceImpl {
  + void cadastrar(Usuario usuario, String senha)
  + boolean autenticar(String nomeOuEmail, String senha)
  + Usuario buscar(String nomeOuEmail)
}

UsuarioService <|.. UsuarioServiceImpl

class ApplicationMain {
  + static void main(String[] args)
}

ApplicationMain --> UsuarioServiceImpl
ApplicationMain --> RegistroDados
ApplicationMain --> Relatorio
ApplicationMain --> CadastroArea
ApplicationMain --> Drone
ApplicationMain --> Scanner

@enduml
